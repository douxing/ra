// Generated by CoffeeScript 1.7.1
var connect, dbOptions, dbURI, dbconnected, dbdisconnected, dberror, exports, mongoose;

mongoose = require('mongoose');

dbURI = 'mongodb://localhost/ra_dev';

dbOptions = {
  server: {
    socketOptions: {
      keepAlive: 1
    }
  }
};

connect = function() {
  return mongoose.connect(dbURI, dbOptions);
};

dbconnected = function() {
  return console.log('Database connected.');
};

dberror = function(err) {
  return console.log("Database error: " + err);
};

dbdisconnected = function(err) {
  console.log('Database disconnected.');
  return connect();
};

exports = module.exports = function() {
  mongoose.connection.on('connected', dbconnected);
  mongoose.connection.on('error', dberror);
  mongoose.connection.on('disconnected', dbdisconnected);
  return connect();
};
